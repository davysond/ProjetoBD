CREATE TABLE  "FORNECEDORES" 
   (	"CNPJ" VARCHAR2(20) NOT NULL ENABLE, 
	"NOME" VARCHAR2(50) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(50) NOT NULL ENABLE, 
	"ENDERECO" VARCHAR2(40) NOT NULL ENABLE, 
	 CONSTRAINT "FORNECEDORES_CON" PRIMARY KEY ("CNPJ")
  USING INDEX  ENABLE
   )
/

CREATE TABLE  "MODALIDADE" 
   (	"ID" NUMBER(20,0) NOT NULL ENABLE, 
	"NOME" VARCHAR2(50) NOT NULL ENABLE, 
	 CONSTRAINT "MODALIDADE_PK" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   )
/

CREATE OR REPLACE EDITIONABLE TRIGGER  "BI_MODALIDADE" 
  before insert on "MODALIDADE"               
  for each row  
begin   
  if :NEW."ID" is null then 
    select "MODALIDADE_SEQ".nextval into :NEW."ID" from sys.dual; 
  end if; 
end; 

/
ALTER TRIGGER  "BI_MODALIDADE" ENABLE
/

CREATE TABLE  "COMISSAO" 
   (	"ID" NUMBER(20,0) NOT NULL ENABLE, 
	 CONSTRAINT "COMISSAO_CON" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   )
/

CREATE TABLE  "FUNCIONARIO" 
   (	"MATRICULA" NUMBER(20,0) NOT NULL ENABLE, 
	"NOME" VARCHAR2(50) NOT NULL ENABLE, 
	"TELEFONE" VARCHAR2(20) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(50) NOT NULL ENABLE, 
	"CODIGO_ORGAO" NUMBER(20,0) NOT NULL ENABLE, 
	 CONSTRAINT "FUNCIONARIO_CON" PRIMARY KEY ("MATRICULA")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "FUNCIONARIO" ADD CONSTRAINT "FUNCIONARIO_CON2" FOREIGN KEY ("CODIGO_ORGAO")
	  REFERENCES  "ORGAO" ("CODIGO") ENABLE
/

CREATE TABLE  "ORGAO" 
   (	"CODIGO" NUMBER(20,0) NOT NULL ENABLE, 
	"NOME" VARCHAR2(50) NOT NULL ENABLE, 
	"TELEFONE" VARCHAR2(20) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(50) NOT NULL ENABLE, 
	"ENDERECO" VARCHAR2(50) NOT NULL ENABLE, 
	"MATRICULA_FUNCIONARIO" NUMBER(20,0) NOT NULL ENABLE, 
	 CONSTRAINT "ORGAO_CON2" PRIMARY KEY ("CODIGO")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "ORGAO" ADD CONSTRAINT "ORGAO_CON" FOREIGN KEY ("MATRICULA_FUNCIONARIO")
	  REFERENCES  "FUNCIONARIO" ("MATRICULA") ENABLE
/

CREATE TABLE  "LICITACAO" 
   (	"NUMERO" NUMBER(20,0) NOT NULL ENABLE, 
	"OBJETO" VARCHAR2(50) NOT NULL ENABLE, 
	"DATA_ABERTURA" DATE NOT NULL ENABLE, 
	"EDITAL" VARCHAR2(50) NOT NULL ENABLE, 
	"ID_MODALIDADE" NUMBER(20,0) NOT NULL ENABLE, 
	"ID_COMISSAO" NUMBER(20,0) NOT NULL ENABLE, 
	"CODIGO_ORGAO" NUMBER(20,0) NOT NULL ENABLE, 
	 CONSTRAINT "LICITACAO_CON" PRIMARY KEY ("NUMERO")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "LICITACAO" ADD CONSTRAINT "LICITACAO_CON2" FOREIGN KEY ("ID_MODALIDADE")
	  REFERENCES  "MODALIDADE" ("ID") ENABLE
/
ALTER TABLE  "LICITACAO" ADD CONSTRAINT "LICITACAO_CON3" FOREIGN KEY ("ID_COMISSAO")
	  REFERENCES  "COMISSAO" ("ID") ENABLE
/
ALTER TABLE  "LICITACAO" ADD CONSTRAINT "LICITACAO_CON4" FOREIGN KEY ("CODIGO_ORGAO")
	  REFERENCES  "ORGAO" ("CODIGO") ENABLE
/

CREATE TABLE  "CONTRATO" 
   (	"VALOR_TOTAL" NUMBER(20,0) NOT NULL ENABLE, 
	"OBJETO" VARCHAR2(50), 
	"DATA_INICIO" DATE, 
	"DATA_FIM" DATE, 
	"NUMERO_PROCESSO" NUMBER(30,0), 
	"CNPJ_FORNECEDOR" VARCHAR2(20), 
	"NUMERO_LICITACAO" NUMBER(30,0), 
	 CONSTRAINT "CONTRATO_CON" PRIMARY KEY ("NUMERO_PROCESSO")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "CONTRATO" ADD CONSTRAINT "CONTRATO_CON2" FOREIGN KEY ("CNPJ_FORNECEDOR")
	  REFERENCES  "FORNECEDORES" ("CNPJ") ENABLE
/
ALTER TABLE  "CONTRATO" ADD CONSTRAINT "CONTRATO_CON3" FOREIGN KEY ("NUMERO_LICITACAO")
	  REFERENCES  "LICITACAO" ("NUMERO") ENABLE
/

CREATE TABLE  "ADITIVO" 
   (	"CODIGO" VARCHAR2(20), 
	"MOTIVO" VARCHAR2(50), 
	"DATA_INICIO" DATE, 
	"DATA_FI" DATE, 
	"VALOR" FLOAT(126), 
	"NUMERO_PROCESSO" NUMBER(30,0), 
	 CONSTRAINT "ADITIVO_CON" PRIMARY KEY ("CODIGO")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "ADITIVO" ADD CONSTRAINT "ADITIVO_CON2" FOREIGN KEY ("NUMERO_PROCESSO")
	  REFERENCES  "CONTRATO" ("NUMERO_PROCESSO") ENABLE
/

CREATE TABLE  "PROPOSTA" 
   (	"ID" NUMBER(20,0), 
	"VENCEDORA" VARCHAR2(20), 
	"PRECO_OFERTADO" FLOAT(126), 
	"CNPJ_FORNECEDOR" VARCHAR2(20), 
	"NUMERO_LICITACAO" NUMBER(20,0), 
	 CONSTRAINT "PROPOSTA_CON" PRIMARY KEY ("ID")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "PROPOSTA" ADD CONSTRAINT "PROPOSTA_CON2" FOREIGN KEY ("NUMERO_LICITACAO")
	  REFERENCES  "LICITACAO" ("NUMERO") ENABLE
/
ALTER TABLE  "PROPOSTA" ADD CONSTRAINT "PROPOSTA_CON3" FOREIGN KEY ("CNPJ_FORNECEDOR")
	  REFERENCES  "FORNECEDORES" ("CNPJ") ENABLE
/

CREATE TABLE  "PRODUTO" 
   (	"CODIGO_DE_BARRAS" VARCHAR2(20) NOT NULL ENABLE, 
	"UNIDADE_MEDIDA" VARCHAR2(20) NOT NULL ENABLE, 
	"QUANTIDADE" NUMBER(35,0) NOT NULL ENABLE, 
	"VALOR_UNITARIO_MAXIMO" FLOAT(126) NOT NULL ENABLE, 
	"NUMERO_LICITACAO" NUMBER(30,0) NOT NULL ENABLE, 
	"ID_PROPOSTA" NUMBER(20,0) NOT NULL ENABLE, 
	"NUMERO_PROCESSO" NUMBER(30,0) NOT NULL ENABLE, 
	"CODIGO_ADITIVO" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "PRODUTO_CON" PRIMARY KEY ("CODIGO_DE_BARRAS")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "PRODUTO" ADD CONSTRAINT "PRODUTO_CON2" FOREIGN KEY ("NUMERO_LICITACAO")
	  REFERENCES  "LICITACAO" ("NUMERO") ENABLE
/
ALTER TABLE  "PRODUTO" ADD CONSTRAINT "PRODUTO_CON3" FOREIGN KEY ("ID_PROPOSTA")
	  REFERENCES  "PROPOSTA" ("ID") ENABLE
/
ALTER TABLE  "PRODUTO" ADD CONSTRAINT "PRODUTO_CON4" FOREIGN KEY ("CODIGO_ADITIVO")
	  REFERENCES  "ADITIVO" ("CODIGO") ENABLE
/
ALTER TABLE  "PRODUTO" ADD CONSTRAINT "PRODUTO_CON5" FOREIGN KEY ("NUMERO_PROCESSO")
	  REFERENCES  "CONTRATO" ("NUMERO_PROCESSO") ENABLE
/

-- ATRIBUTOS MULTIVALORADOS --

CREATE TABLE  "TELEFONES_FORNECEDOR" 
   (	"NUMERO" VARCHAR2(20) NOT NULL ENABLE, 
	"CNPJ_FORNECEDOR" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "TELEFONES_FORNECEDOR_CON2" PRIMARY KEY ("NUMERO", "CNPJ_FORNECEDOR")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "TELEFONES_FORNECEDOR" ADD CONSTRAINT "TELEFONES_FORNECEDOR_CON" FOREIGN KEY ("CNPJ_FORNECEDOR")
	  REFERENCES  "FORNECEDORES" ("CNPJ") ENABLE
/

-- RELAÇÕES N:M --

CREATE TABLE  "PROPOSTA_PRODUTO" 
   (	"ID_PROPOSTA" NUMBER(20,0) NOT NULL ENABLE, 
	"CODIGO_DE_BARRAS" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "PROPOSTA_PRODUTO_CON" PRIMARY KEY ("ID_PROPOSTA", "CODIGO_DE_BARRAS")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "PROPOSTA_PRODUTO" ADD CONSTRAINT "PROPOSTA_PRODUTO_CON2" FOREIGN KEY ("ID_PROPOSTA")
	  REFERENCES  "PROPOSTA" ("ID") ENABLE
/
ALTER TABLE  "PROPOSTA_PRODUTO" ADD CONSTRAINT "PROPOSTA_PRODUTO_CON3" FOREIGN KEY ("CODIGO_DE_BARRAS")
	  REFERENCES  "PRODUTO" ("CODIGO_DE_BARRAS") ENABLE
/

CREATE TABLE  "LICITACAO_PRODUTO" 
   (	"NUMERO_LICITACAO" NUMBER(20,0) NOT NULL ENABLE, 
	"CODIGO_DE_BARRAS" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "LICITACAO_PRODUTO_CON" PRIMARY KEY ("NUMERO_LICITACAO", "CODIGO_DE_BARRAS")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "LICITACAO_PRODUTO" ADD CONSTRAINT "LICITACAO_PRODUTO_CON2" FOREIGN KEY ("NUMERO_LICITACAO")
	  REFERENCES  "LICITACAO" ("NUMERO") ENABLE
/
ALTER TABLE  "LICITACAO_PRODUTO" ADD CONSTRAINT "LICITACAO_PRODUTO_CON3" FOREIGN KEY ("CODIGO_DE_BARRAS")
	  REFERENCES  "PRODUTO" ("CODIGO_DE_BARRAS") ENABLE
/

CREATE TABLE  "ADITIVO_PRODUTO" 
   (	"CODIGO" VARCHAR2(20) NOT NULL ENABLE, 
	"CODIGO_DE_BARRAS" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "ADITIVO_PRODUTO_CON" PRIMARY KEY ("CODIGO", "CODIGO_DE_BARRAS")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "ADITIVO_PRODUTO" ADD CONSTRAINT "ADITIVO_PRODUTO_CON2" FOREIGN KEY ("CODIGO")
	  REFERENCES  "ADITIVO" ("CODIGO") ENABLE
/
ALTER TABLE  "ADITIVO_PRODUTO" ADD CONSTRAINT "ADITIVO_PRODUTO_CON3" FOREIGN KEY ("CODIGO_DE_BARRAS")
	  REFERENCES  "PRODUTO" ("CODIGO_DE_BARRAS") ENABLE
/

CREATE TABLE  "PRODUTO_CONTRATO" 
   (	"NUMERO_PROCESSO" NUMBER(30,0) NOT NULL ENABLE, 
	"CODIGO_DE_BARRAS" VARCHAR2(20) NOT NULL ENABLE, 
	 CONSTRAINT "PRODUTO_CONTRATO_CON" PRIMARY KEY ("NUMERO_PROCESSO", "CODIGO_DE_BARRAS")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "PRODUTO_CONTRATO" ADD CONSTRAINT "PRODUTO_CONTRATO_CON2" FOREIGN KEY ("NUMERO_PROCESSO")
	  REFERENCES  "CONTRATO" ("NUMERO_PROCESSO") ENABLE
/
ALTER TABLE  "PRODUTO_CONTRATO" ADD CONSTRAINT "PRODUTO_CONTRATO_CON3" FOREIGN KEY ("CODIGO_DE_BARRAS")
	  REFERENCES  "PRODUTO" ("CODIGO_DE_BARRAS") ENABLE
/

CREATE TABLE  "FUNCIONARIO_COMISSAO" 
   (	"ID_COMISSAO" NUMBER(20,0), 
	"MATRICULA_FUNCIONARIO" NUMBER(20,0), 
	 CONSTRAINT "FUNCIONARIO_COMISSAO_CON" PRIMARY KEY ("ID_COMISSAO", "MATRICULA_FUNCIONARIO")
  USING INDEX  ENABLE
   )
/
ALTER TABLE  "FUNCIONARIO_COMISSAO" ADD CONSTRAINT "FUNCIONARIO_COMISSAO_CO2" FOREIGN KEY ("ID_COMISSAO")
	  REFERENCES  "COMISSAO" ("ID") ENABLE
/
ALTER TABLE  "FUNCIONARIO_COMISSAO" ADD CONSTRAINT "FUNCIONARIO_COMISSAO_CON3" FOREIGN KEY ("MATRICULA_FUNCIONARIO")
	  REFERENCES  "FUNCIONARIO" ("MATRICULA") ENABLE
/

DROP TABLE FORNECEDORES CASCADE CONSTRAINTS;

DROP TABLE LICITACAO CASCADE CONSTRAINTS;

DROP TABLE PROPOSTA CASCADE CONSTRAINTS;

DROP TABLE ADITIVO CASCADE CONSTRAINTS;

DROP TABLE PRODUTO CASCADE CONSTRAINTS;

DROP TABLE MODALIDADE CASCADE CONSTRAINTS;

DROP TABLE COMISSAO CASCADE CONSTRAINTS;

DROP TABLE ORGAO CASCADE CONSTRAINTS;

DROP TABLE FUNCIONARIO CASCADE CONSTRAINTS;

DROP TABLE CONTRATO CASCADE CONSTRAINTS;

DROP TABLE TELEFONES_FORNECEDOR CASCADE CONSTRAINTS;

DROP TABLE LICITACAO_PRODUTO CASCADE CONSTRAINTS;

DROP TABLE PROPOSTA_PRODUTO CASCADE CONSTRAINTS;

DROP TABLE ADITIVO_PRODUTO CASCADE CONSTRAINTS;

DROP TABLE PRODUTO_CONTRATO CASCADE CONSTRAINTS;

DROP TABLE FUNCIONARIO_COMISSAO CASCADE CONSTRAINTS;